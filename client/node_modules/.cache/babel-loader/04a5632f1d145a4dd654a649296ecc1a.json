{"ast":null,"code":"import _defineProperty from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import axios from\"axios\";import PostList from\"./PostList\";import NewPost from\"./NewPost\";import{Button}from\"react-bootstrap\";var Posts=/*#__PURE__*/function(_Component){_inherits(Posts,_Component);function Posts(){var _getPrototypeOf2;var _this;_classCallCheck(this,Posts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Posts)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={posts:[],search:\"\",category:\"\",owner:\"\",addPost:false};_this.getDataPosts=function(){axios.get('/post').then(function(response){// console.log(response.data)\n_this.setState({posts:response.data});}).catch(function(err){console.log(err);});};_this.handleChangeFilter=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.toggleEdit=function(){_this.setState({addPost:!_this.state.addPost});};return _this;}_createClass(Posts,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDataPosts();}//=============================== filter functions\n},{key:\"render\",value:function render(){var _this2=this;var filteredPosts=this.state.posts.filter(function(post){// console.log(\"match-id\", post.match._id)\nreturn(!_this2.state.owner||(_this2.state.owner===\"owner\"&&post.owner._id===_this2.props.user._id||_this2.state.owner===\"match\"&&post.match&&post.match._id===_this2.props.user._id)&&(_this2.state.category===post.category||!_this2.state.category))&&(_this2.state.category===post.category||!_this2.state.category);});return React.createElement(\"div\",{className:\"post-container\"},React.createElement(\"label\",{htmlFor:\"myposts\"},\"My posts\"),React.createElement(\"select\",{name:\"owner\",id:\"owner\",value:this.state.owner,onChange:this.handleChangeFilter},React.createElement(\"option\",{value:\"\"},\"--\"),React.createElement(\"option\",{value:\"owner\"},\"My posts\"),React.createElement(\"option\",{value:\"match\"},\"Registered\")),React.createElement(\"label\",{htmlFor:\"category\"},\"Filter by Category\"),React.createElement(\"select\",{name:\"category\",id:\"category\",value:this.state.category,onChange:this.handleChangeFilter},React.createElement(\"option\",{value:\"\"},\"--\"),React.createElement(\"option\",{value:\"language lessons\"},\"Language lessons\"),React.createElement(\"option\",{value:\"tutoring\"},\"Tutoring\"),React.createElement(\"option\",{value:\"government appointment\"},\"Government appointment\"),React.createElement(\"option\",{value:\"doctor appointment\"},\"Doctor appointment\"),React.createElement(\"option\",{value:\"meet people\"},\"Meet people\"),React.createElement(\"option\",{value:\"activities for kids\"},\"Activities for kids\"),React.createElement(\"option\",{value:\"activities for seniors\"},\"Activities for seniors\")),React.createElement(PostList,{posts:filteredPosts}),React.createElement(Button,{onClick:this.toggleEdit},\"Add a Post\"),this.state.addPost&&React.createElement(NewPost,{refreshData:this.getDataPosts}));}}]);return Posts;}(Component);export default Posts;","map":{"version":3,"sources":["/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Post/Posts.js"],"names":["React","Component","axios","PostList","NewPost","Button","Posts","state","posts","search","category","owner","addPost","getDataPosts","get","then","response","setState","data","catch","err","console","log","handleChangeFilter","event","target","name","value","toggleEdit","filteredPosts","filter","post","_id","props","user","match"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport PostList from \"./PostList\";\nimport NewPost from \"./NewPost\";\nimport { Button } from \"react-bootstrap\";\n\nclass Posts extends Component {\n  state = {\n    posts: [],\n    search: \"\",\n    category: \"\",\n    owner: \"\",\n    addPost: false\n  };\n\n  //============================ posts functions\n  getDataPosts = () => {\n    axios\n      .get('/post')\n      .then(response => {\n        // console.log(response.data)\n        this.setState({\n          posts: response.data\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  };\n\n  componentDidMount() {\n    this.getDataPosts();\n  }\n\n  //=============================== filter functions\n\n\n  handleChangeFilter = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  toggleEdit = () => {\n    this.setState({\n      addPost: !this.state.addPost\n    });\n  };\n\n\n\n  render() {\n\n    const filteredPosts = this.state.posts.filter(post => {\n      // console.log(\"match-id\", post.match._id)\n\n      return (\n\n        ((!this.state.owner) ||\n          ((this.state.owner === \"owner\" && post.owner._id === this.props.user._id) ||\n\n            (((this.state.owner === \"match\") && post.match) && post.match._id === this.props.user._id)) &&\n\n          (this.state.category === post.category || !this.state.category))\n\n        && (this.state.category === post.category || !this.state.category)\n\n      );\n    });\n\n\n    return (\n      <div className=\"post-container\" >\n\n        <label htmlFor=\"myposts\" >My posts</label>\n        <select\n          name=\"owner\"\n          id=\"owner\"\n          value={this.state.owner}\n          onChange={this.handleChangeFilter}\n\n        >\n          <option value=\"\">--</option>\n          <option value=\"owner\">My posts</option>\n          <option value=\"match\">Registered</option>\n        </select>\n\n\n\n        <label htmlFor=\"category\">Filter by Category</label>\n        <select\n          name=\"category\"\n          id=\"category\"\n          value={this.state.category}\n          onChange={this.handleChangeFilter}\n        >\n          <option value=\"\">--</option>\n          <option value=\"language lessons\">Language lessons</option>\n          <option value=\"tutoring\">Tutoring</option>\n          <option value=\"government appointment\">Government appointment</option>\n          <option value=\"doctor appointment\">Doctor appointment</option>\n          <option value=\"meet people\">Meet people</option>\n          <option value=\"activities for kids\">Activities for kids</option>\n          <option value=\"activities for seniors\">Activities for seniors</option>\n        </select>\n\n\n\n        <PostList posts={filteredPosts} />\n\n        <Button onClick={this.toggleEdit}>Add a Post</Button>\n\n        {this.state.addPost &&\n          <NewPost\n            refreshData={this.getDataPosts}\n          />\n        }\n      </div>\n    )\n  }\n\n\n}\n\n\n\nexport default Posts;\n\n"]},"metadata":{},"sourceType":"module"}