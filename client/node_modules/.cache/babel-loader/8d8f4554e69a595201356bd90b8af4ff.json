{"ast":null,"code":"import _defineProperty from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import axios from\"axios\";import{Form,Button}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import ReplyMailbox from\"./ReplyMailbox\";var MailboxDetail=/*#__PURE__*/function(_Component){_inherits(MailboxDetail,_Component);function MailboxDetail(){var _getPrototypeOf2;var _this;_classCallCheck(this,MailboxDetail);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MailboxDetail)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={message:null,content:\"\"};_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleSubmit=function(event){event.preventDefault();var id=_this.props.match.params.messageId;axios.post(\"/messages/add\",{id:id,content:_this.state.content,subject:_this.state.message._id,owner:_this.state.message.owner._id,recipient:_this.state.message.owner._id}).then(function(message){console.log(message);_this.setState({content:\"\"});_this.getMailboxDetail();//this.props.history.push(`/mailbox/${this.state.post.owner._id}`);\n});};return _this;}_createClass(MailboxDetail,[{key:\"getMailboxDetail\",value:function getMailboxDetail(){var _this2=this;var id=this.props.match.params.messageId;console.log(id);axios.get(\"/messages/detail/\".concat(id)).then(function(response){console.log(response.data);_this2.setState({message:response.data});}).catch(function(err){console.log(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getMailboxDetail();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps!==this.props){this.getMailboxDetail();}}},{key:\"render\",value:function render(){if(this.state.message===null){return React.createElement(\"div\",null);}var comments=this.state.message.comments.map(function(comment){return React.createElement(\"div\",null,comment.content);});return React.createElement(\"div\",{style:{marginLeft:\"40%\"}},React.createElement(\"p\",null,this.state.message.content),React.createElement(\"p\",null,\"Created at: \",this.state.message.created_at),comments,React.createElement(Form,{onSubmit:this.handleSubmit},React.createElement(Form.Group,{controlId:\"exampleForm.ControlTextarea1\"},React.createElement(Form.Label,null,\"Your Message\"),React.createElement(Form.Control,{as:\"textarea\",rows:\"3\",name:\"content\",onChange:this.handleChange}),React.createElement(\"button\",null,\"Send Message\"))));}}]);return MailboxDetail;}(Component);export default MailboxDetail;","map":{"version":3,"sources":["/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Post/MailboxDetail.js"],"names":["React","Component","axios","Form","Button","Link","ReplyMailbox","MailboxDetail","state","message","content","handleChange","event","setState","target","name","value","handleSubmit","preventDefault","id","props","match","params","messageId","post","subject","_id","owner","recipient","then","console","log","getMailboxDetail","get","response","data","catch","err","prevProps","comments","map","comment","marginLeft","created_at"],"mappings":"w+BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,MAAf,KAA6B,iBAA7B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,C,GAEMC,CAAAA,a,2ZACJC,K,CAAQ,CACNC,OAAO,CAAE,IADH,CAENC,OAAO,CAAE,EAFH,C,OAKRC,Y,CAAe,SAAAC,KAAK,CAAI,CACtB,MAAKC,QAAL,oBACGD,KAAK,CAACE,MAAN,CAAaC,IADhB,CACuBH,KAAK,CAACE,MAAN,CAAaE,KADpC,GAGD,C,OAkBDC,Y,CAAe,SAAAL,KAAK,CAAI,CACtBA,KAAK,CAACM,cAAN,GACA,GAAMC,CAAAA,EAAE,CAAG,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,SAAnC,CAEArB,KAAK,CACFsB,IADH,CACQ,eADR,CACyB,CACrBL,EAAE,CAAEA,EADiB,CAErBT,OAAO,CAAE,MAAKF,KAAL,CAAWE,OAFC,CAGrBe,OAAO,CAAE,MAAKjB,KAAL,CAAWC,OAAX,CAAmBiB,GAHP,CAIrBC,KAAK,CAAE,MAAKnB,KAAL,CAAWC,OAAX,CAAmBkB,KAAnB,CAAyBD,GAJX,CAKrBE,SAAS,CAAE,MAAKpB,KAAL,CAAWC,OAAX,CAAmBkB,KAAnB,CAAyBD,GALf,CADzB,EAQGG,IARH,CAQQ,SAAApB,OAAO,CAAI,CACfqB,OAAO,CAACC,GAAR,CAAYtB,OAAZ,EACA,MAAKI,QAAL,CAAc,CACZH,OAAO,CAAE,EADG,CAAd,EAGA,MAAKsB,gBAAL,GACA;AACD,CAfH,EAgBD,C,oGApCkB,iBACjB,GAAMb,CAAAA,EAAE,CAAG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,SAAnC,CACAO,OAAO,CAACC,GAAR,CAAYZ,EAAZ,EACAjB,KAAK,CACF+B,GADH,4BAC2Bd,EAD3B,GAEGU,IAFH,CAEQ,SAAAK,QAAQ,CAAI,CAChBJ,OAAO,CAACC,GAAR,CAAYG,QAAQ,CAACC,IAArB,EACA,MAAI,CAACtB,QAAL,CAAc,CACZJ,OAAO,CAAEyB,QAAQ,CAACC,IADN,CAAd,EAGD,CAPH,EAQGC,KARH,CAQS,SAAAC,GAAG,CAAI,CACZP,OAAO,CAACC,GAAR,CAAYM,GAAZ,EACD,CAVH,EAWD,C,6DAwBmB,CAClB,KAAKL,gBAAL,GACD,C,8DAEkBM,S,CAAW,CAC5B,GAAIA,SAAS,GAAK,KAAKlB,KAAvB,CAA8B,CAC5B,KAAKY,gBAAL,GACD,CACF,C,uCAEQ,CACP,GAAI,KAAKxB,KAAL,CAAWC,OAAX,GAAuB,IAA3B,CAAiC,CAC/B,MAAO,gCAAP,CACD,CAED,GAAI8B,CAAAA,QAAQ,CAAG,KAAK/B,KAAL,CAAWC,OAAX,CAAmB8B,QAAnB,CAA4BC,GAA5B,CAAgC,SAAAC,OAAO,CAAI,CACxD,MAAO,gCAAMA,OAAO,CAAC/B,OAAd,CAAP,CACD,CAFc,CAAf,CAIA,MACE,4BAAK,KAAK,CAAE,CAAEgC,UAAU,CAAE,KAAd,CAAZ,EACE,6BAAI,KAAKlC,KAAL,CAAWC,OAAX,CAAmBC,OAAvB,CADF,CAEE,4CAAgB,KAAKF,KAAL,CAAWC,OAAX,CAAmBkC,UAAnC,CAFF,CAIGJ,QAJH,CAME,oBAAC,IAAD,EAAM,QAAQ,CAAE,KAAKtB,YAArB,EACE,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,8BAAtB,EACE,oBAAC,IAAD,CAAM,KAAN,qBADF,CAEE,oBAAC,IAAD,CAAM,OAAN,EACE,EAAE,CAAC,UADL,CAEE,IAAI,CAAC,GAFP,CAGE,IAAI,CAAC,SAHP,CAIE,QAAQ,CAAE,KAAKN,YAJjB,EAFF,CAQE,iDARF,CADF,CANF,CADF,CAqBD,C,2BA1FyBV,S,EA6F5B,cAAeM,CAAAA,aAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport ReplyMailbox from \"./ReplyMailbox\";\n\nclass MailboxDetail extends Component {\n  state = {\n    message: null,\n    content: \"\"\n  };\n\n  handleChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  getMailboxDetail() {\n    const id = this.props.match.params.messageId;\n    console.log(id);\n    axios\n      .get(`/messages/detail/${id}`)\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          message: response.data\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const id = this.props.match.params.messageId;\n\n    axios\n      .post(\"/messages/add\", {\n        id: id,\n        content: this.state.content,\n        subject: this.state.message._id,\n        owner: this.state.message.owner._id,\n        recipient: this.state.message.owner._id\n      })\n      .then(message => {\n        console.log(message);\n        this.setState({\n          content: \"\"\n        });\n        this.getMailboxDetail();\n        //this.props.history.push(`/mailbox/${this.state.post.owner._id}`);\n      });\n  };\n\n  componentDidMount() {\n    this.getMailboxDetail();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps !== this.props) {\n      this.getMailboxDetail();\n    }\n  }\n\n  render() {\n    if (this.state.message === null) {\n      return <div></div>;\n    }\n\n    let comments = this.state.message.comments.map(comment => {\n      return <div>{comment.content}</div>;\n    });\n\n    return (\n      <div style={{ marginLeft: \"40%\" }}>\n        <p>{this.state.message.content}</p>\n        <p>Created at: {this.state.message.created_at}</p>\n\n        {comments}\n\n        <Form onSubmit={this.handleSubmit}>\n          <Form.Group controlId=\"exampleForm.ControlTextarea1\">\n            <Form.Label>Your Message</Form.Label>\n            <Form.Control\n              as=\"textarea\"\n              rows=\"3\"\n              name=\"content\"\n              onChange={this.handleChange}\n            />\n            <button>Send Message</button>\n          </Form.Group>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default MailboxDetail;\n"]},"metadata":{},"sourceType":"module"}