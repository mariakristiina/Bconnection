{"ast":null,"code":"var _jsxFileName = \"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Post/PostDetail.js\";\nimport React from \"react\";\nimport Message from \"./Messages\";\nimport axios from \"axios\";\nimport \"./PostCss/postDetail.css\";\nimport { Button } from \"react-bootstrap\";\n\nclass PostDetail extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      post: \"\",\n      title: \"\",\n      date: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      postType: \"\",\n      category: \"\",\n      description: \"\",\n      owner: \"\",\n      match: \"\",\n      messages: \"\"\n    };\n\n    this.getDataPostDetail = () => {\n      const id = this.props.match.params.id;\n      console.log(id);\n      axios.get(\"/post/\".concat(id)).then(response => {\n        console.log(response.data);\n        this.setState({\n          post: response.data,\n          title: response.data.title,\n          date: response.data.date,\n          startTime: response.data.startTime,\n          endTime: response.data.endTime,\n          postType: response.data.postType,\n          category: response.data.category,\n          description: response.data.description,\n          owner: response.data.owner,\n          match: response.data.match,\n          messages: response.data.messages\n        });\n        console.log(this.state.post);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const userId = this.props.user._id;\n      const postId = this.props.match.params.id;\n      axios.put(\"/post/register/\".concat(postId), {\n        match: this.state.match\n      }).then(post => {\n        this.setState({\n          match: userId\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleSubmitDeRegister = event => {\n      event.preventDefault();\n      const postId = this.props.match.params.id;\n      axios.put(\"/post/deregister/\".concat(postId), {\n        match: this.state.match\n      }).then(post => {\n        this.setState({\n          match: \"\"\n        });\n        console.log(this.state);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.deletePost = () => {\n      const id = this.state.post._id;\n      axios.delete(\"/post/\".concat(id)).then(response => {\n        this.props.history.push(\"/posts\"); // \n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getDataPostDetail();\n  } //===================== delete post functions\n\n\n  //============================== render\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"postContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.state.title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, this.state.postType), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, this.state.category), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, this.state.date), React.createElement(\"div\", {\n      className: \"times\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"from: \", this.state.startTime, \"to: \"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \" \", this.state.endTime)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, this.state.description)), this.state.owner._id === this.props.user._id ? React.createElement(React.Fragment, null, React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.deletePost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Delete Post\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), this.state.match ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"You are registered\"), React.createElement(\"form\", {\n      onSubmit: this.handleSubmitDeRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"De-Register\"))) : React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Register\")), React.createElement(\"div\", {\n      className: \"posterContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, this.state.owner.username), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, this.state.owner.gender), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, this.state.owner.about)), React.createElement(Message, Object.assign({\n      subject: this.state.post._id,\n      recipient: this.state.post.owner,\n      owner: this.props.user\n    }, this.props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default PostDetail;","map":{"version":3,"sources":["/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Post/PostDetail.js"],"names":["React","Message","axios","Button","PostDetail","Component","state","post","title","date","startTime","endTime","postType","category","description","owner","match","messages","getDataPostDetail","id","props","params","console","log","get","then","response","data","setState","catch","err","handleSubmit","event","preventDefault","userId","user","_id","postId","put","handleSubmitDeRegister","deletePost","delete","history","push","componentDidMount","render","username","gender","about"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Message from \"./Messages\";\nimport axios from \"axios\";\nimport \"./PostCss/postDetail.css\";\nimport { Button } from \"react-bootstrap\";\n\nclass PostDetail extends React.Component {\n  state = {\n    post: \"\",\n    title: \"\",\n    date: \"\",\n    startTime: \"\",\n    endTime: \"\",\n    postType: \"\",\n    category: \"\",\n    description: \"\",\n    owner: \"\",\n    match: \"\",\n    messages: \"\"\n  };\n\n  //================= get data\n\n  getDataPostDetail = () => {\n    const id = this.props.match.params.id;\n    console.log(id);\n\n    axios\n      .get(`/post/${id}`)\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          post: response.data,\n          title: response.data.title,\n          date: response.data.date,\n          startTime: response.data.startTime,\n          endTime: response.data.endTime,\n          postType: response.data.postType,\n          category: response.data.category,\n          description: response.data.description,\n          owner: response.data.owner,\n          match: response.data.match,\n          messages: response.data.messages\n        });\n        console.log(this.state.post);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n\n  //=================== register functions\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const userId = this.props.user._id;\n    const postId = this.props.match.params.id;\n\n    axios\n      .put(`/post/register/${postId}`, {\n        match: this.state.match\n      })\n      .then(post => {\n        this.setState({\n          match: userId\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  handleSubmitDeRegister = event => {\n    event.preventDefault();\n\n    const postId = this.props.match.params.id;\n\n    axios\n      .put(`/post/deregister/${postId}`, {\n        match: this.state.match\n      })\n      .then(post => {\n        this.setState({\n          match: \"\"\n        });\n        console.log(this.state);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  componentDidMount() {\n    this.getDataPostDetail();\n  }\n\n\n  //===================== delete post functions\n\n  deletePost = () => {\n    const id = this.state.post._id;\n    axios\n      .delete(`/post/${id}`)\n      .then(response => {\n        this.props.history.push(\"/posts\"); // \n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n\n  //============================== render\n  render() {\n\n    return (\n      <div>\n        <div className=\"postContainer\">\n          <h2>{this.state.title}</h2>\n          <p>{this.state.postType}</p>\n          <p>{this.state.category}</p>\n\n          <p>{this.state.date}</p>\n          <div className=\"times\">\n            <p>from: {this.state.startTime}to: </p>\n            <p> {this.state.endTime}</p>\n          </div>\n          <p>{this.state.description}</p>\n\n        </div>\n\n        {this.state.owner._id === this.props.user._id ?\n          <>\n            <Button variant=\"danger\" onClick={this.deletePost}>\n              Delete Post\n            </Button>\n          </>\n          :\n          <div></div>\n        }\n\n        {this.state.match ? (\n          <div>\n            <h2>You are registered</h2>\n            <form onSubmit={this.handleSubmitDeRegister}>\n              <button type=\"submit\">De-Register</button>\n            </form>\n          </div>\n        ) : (\n            <form onSubmit={this.handleSubmit}>\n              <button type=\"submit\">Register</button>\n            </form>\n          )}\n        <div className=\"posterContainer\">\n          <p>{this.state.owner.username}</p>\n          <p>{this.state.owner.gender}</p>\n          <p>{this.state.owner.about}</p>\n        </div>\n\n        <Message\n          subject={this.state.post._id}\n          recipient={this.state.post.owner}\n          owner={this.props.user}\n          {...this.props}\n        />\n      </div>\n    );\n  }\n}\n\nexport default PostDetail;\n\n\n"]},"metadata":{},"sourceType":"module"}