{"ast":null,"code":"import _classCallCheck from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Message from\"./Messages\";import axios from\"axios\";import\"./PostCss/postDetail.css\";import{Button}from\"react-bootstrap\";var PostDetail=/*#__PURE__*/function(_React$Component){_inherits(PostDetail,_React$Component);function PostDetail(){var _getPrototypeOf2;var _this;_classCallCheck(this,PostDetail);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PostDetail)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={post:\"\",title:\"\",date:\"\",startTime:\"\",endTime:\"\",postType:\"\",category:\"\",description:\"\",owner:\"\",match:\"\",messages:\"\"};_this.getDataPostDetail=function(){var id=_this.props.match.params.id;console.log(id);axios.get(\"/post/\".concat(id)).then(function(response){console.log(response.data);_this.setState({post:response.data,title:response.data.title,date:response.data.date,startTime:response.data.startTime,endTime:response.data.endTime,postType:response.data.postType,category:response.data.category,description:response.data.description,owner:response.data.owner,match:response.data.match,messages:response.data.messages});console.log(_this.state.post);}).catch(function(err){console.log(err);});};_this.handleSubmit=function(event){event.preventDefault();var userId=_this.props.user._id;var postId=_this.props.match.params.id;axios.put(\"/post/register/\".concat(postId),{match:_this.state.match}).then(function(post){_this.setState({match:userId});}).catch(function(err){console.log(err);});};_this.handleSubmitDeRegister=function(event){event.preventDefault();var postId=_this.props.match.params.id;axios.put(\"/post/deregister/\".concat(postId),{match:_this.state.match}).then(function(post){_this.setState({match:\"\"});console.log(_this.state);}).catch(function(err){console.log(err);});};_this.deletePost=function(){var id=_this.state.post._id;axios.delete(\"/post/\".concat(id)).then(function(response){_this.props.history.push(\"/posts\");// \n}).catch(function(err){console.log(err);});};return _this;}_createClass(PostDetail,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDataPostDetail();}//===================== delete post functions\n},{key:\"render\",//============================== render\nvalue:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"postContainer\"},React.createElement(\"h2\",null,this.state.title),React.createElement(\"p\",null,this.state.postType),React.createElement(\"p\",null,this.state.category),React.createElement(\"p\",null,this.state.date),React.createElement(\"div\",{className:\"times\"},React.createElement(\"p\",null,\"from: \",this.state.startTime,\"to: \"),React.createElement(\"p\",null,\" \",this.state.endTime)),React.createElement(\"p\",null,this.state.description)),this.state.owner._id===this.props.user._id?React.createElement(React.Fragment,null,React.createElement(Button,{variant:\"danger\",onClick:this.deletePost},\"Delete Post\")):React.createElement(\"div\",null),this.state.match?React.createElement(\"div\",null,React.createElement(\"h2\",null,\"You are registered\"),React.createElement(\"form\",{onSubmit:this.handleSubmitDeRegister},React.createElement(\"button\",{type:\"submit\"},\"De-Register\"))):React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"button\",{type:\"submit\"},\"Register\")),React.createElement(\"div\",{className:\"posterContainer\"},React.createElement(\"p\",null,this.state.owner.username),React.createElement(\"p\",null,this.state.owner.gender),React.createElement(\"p\",null,this.state.owner.about)),React.createElement(Message,Object.assign({subject:this.state.post._id,recipient:this.state.post.owner,owner:this.props.user},this.props)));}}]);return PostDetail;}(React.Component);export default PostDetail;","map":{"version":3,"sources":["/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Post/PostDetail.js"],"names":["React","Message","axios","Button","PostDetail","state","post","title","date","startTime","endTime","postType","category","description","owner","match","messages","getDataPostDetail","id","props","params","console","log","get","then","response","data","setState","catch","err","handleSubmit","event","preventDefault","userId","user","_id","postId","put","handleSubmitDeRegister","deletePost","delete","history","push","username","gender","about","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Message from \"./Messages\";\nimport axios from \"axios\";\nimport \"./PostCss/postDetail.css\";\nimport { Button } from \"react-bootstrap\";\n\nclass PostDetail extends React.Component {\n  state = {\n    post: \"\",\n    title: \"\",\n    date: \"\",\n    startTime: \"\",\n    endTime: \"\",\n    postType: \"\",\n    category: \"\",\n    description: \"\",\n    owner: \"\",\n    match: \"\",\n    messages: \"\"\n  };\n\n  //================= get data\n\n  getDataPostDetail = () => {\n    const id = this.props.match.params.id;\n    console.log(id);\n\n    axios\n      .get(`/post/${id}`)\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          post: response.data,\n          title: response.data.title,\n          date: response.data.date,\n          startTime: response.data.startTime,\n          endTime: response.data.endTime,\n          postType: response.data.postType,\n          category: response.data.category,\n          description: response.data.description,\n          owner: response.data.owner,\n          match: response.data.match,\n          messages: response.data.messages\n        });\n        console.log(this.state.post);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n\n  //=================== register functions\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const userId = this.props.user._id;\n    const postId = this.props.match.params.id;\n\n    axios\n      .put(`/post/register/${postId}`, {\n        match: this.state.match\n      })\n      .then(post => {\n        this.setState({\n          match: userId\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  handleSubmitDeRegister = event => {\n    event.preventDefault();\n\n    const postId = this.props.match.params.id;\n\n    axios\n      .put(`/post/deregister/${postId}`, {\n        match: this.state.match\n      })\n      .then(post => {\n        this.setState({\n          match: \"\"\n        });\n        console.log(this.state);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  componentDidMount() {\n    this.getDataPostDetail();\n  }\n\n\n  //===================== delete post functions\n\n  deletePost = () => {\n    const id = this.state.post._id;\n    axios\n      .delete(`/post/${id}`)\n      .then(response => {\n        this.props.history.push(\"/posts\"); // \n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n\n  //============================== render\n  render() {\n\n    return (\n      <div>\n        <div className=\"postContainer\">\n          <h2>{this.state.title}</h2>\n          <p>{this.state.postType}</p>\n          <p>{this.state.category}</p>\n\n          <p>{this.state.date}</p>\n          <div className=\"times\">\n            <p>from: {this.state.startTime}to: </p>\n            <p> {this.state.endTime}</p>\n          </div>\n          <p>{this.state.description}</p>\n\n        </div>\n\n        {this.state.owner._id === this.props.user._id ?\n          <>\n            <Button variant=\"danger\" onClick={this.deletePost}>\n              Delete Post\n            </Button>\n          </>\n          :\n          <div></div>\n        }\n\n        {this.state.match ? (\n          <div>\n            <h2>You are registered</h2>\n            <form onSubmit={this.handleSubmitDeRegister}>\n              <button type=\"submit\">De-Register</button>\n            </form>\n          </div>\n        ) : (\n            <form onSubmit={this.handleSubmit}>\n              <button type=\"submit\">Register</button>\n            </form>\n          )}\n        <div className=\"posterContainer\">\n          <p>{this.state.owner.username}</p>\n          <p>{this.state.owner.gender}</p>\n          <p>{this.state.owner.about}</p>\n        </div>\n\n        <Message\n          subject={this.state.post._id}\n          recipient={this.state.post.owner}\n          owner={this.props.user}\n          {...this.props}\n        />\n      </div>\n    );\n  }\n}\n\nexport default PostDetail;\n\n\n"]},"metadata":{},"sourceType":"module"}