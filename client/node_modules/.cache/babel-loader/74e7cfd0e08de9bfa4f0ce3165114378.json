{"ast":null,"code":"import _defineProperty from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{login}from\"../services/auth\";import{Alert,Form,Button}from\"react-bootstrap\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={username:\"\",password:\"\",error:\"\"};_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleSubmit=function(event){event.preventDefault();login(_this.state.username,_this.state.password).then(function(data){console.log(_this.props);if(data.message){_this.setState({error:data.message});}else{_this.props.setUser(data);console.log(_this._isMounted);_this.props.changeLanguageLogin();_this.props.history.push(\"/\");console.log(_this.props.currentLanguage);console.log(_this.props.user.siteLanguage);}});};return _this;}_createClass(Login,[{key:\"componentWillMount\",value:function componentWillMount(){this._isMounted=true;}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(Form,{onSubmit:this.handleSubmit},React.createElement(Form.Group,null,React.createElement(Form.Label,{htmlFor:\"username\"},\"Username\"),React.createElement(Form.Control,{type:\"text\",name:\"username\",id:\"username\",value:this.state.username,onChange:this.handleChange})),React.createElement(Form.Group,null,React.createElement(Form.Label,{htmlFor:\"password\"},\"Password:\"),React.createElement(Form.Control,{type:\"password\",name:\"password\",id:\"password\",value:this.state.password,onChange:this.handleChange})),this.state.error&&React.createElement(Alert,{variant:\"danger\"},this.state.error),React.createElement(Button,{type:\"submit\"},\"Log in\")));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Login.js"],"names":["React","Component","login","Alert","Form","Button","Login","state","username","password","error","handleChange","event","setState","target","name","value","handleSubmit","preventDefault","then","data","console","log","props","message","setUser","_isMounted","changeLanguageLogin","history","push","currentLanguage","user","siteLanguage"],"mappings":"w+BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,KAAsB,kBAAtB,CACA,OAASC,KAAT,CAAgBC,IAAhB,CAAsBC,MAAtB,KAAoC,iBAApC,C,GAGMC,CAAAA,K,2XACJC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENC,QAAQ,CAAE,EAFJ,CAGNC,KAAK,CAAE,EAHD,C,OAWRC,Y,CAAe,SAAAC,KAAK,CAAI,CACtB,MAAKC,QAAL,oBACGD,KAAK,CAACE,MAAN,CAAaC,IADhB,CACuBH,KAAK,CAACE,MAAN,CAAaE,KADpC,GAGD,C,OAEDC,Y,CAAe,SAAAL,KAAK,CAAI,CACtBA,KAAK,CAACM,cAAN,GAGAhB,KAAK,CAAC,MAAKK,KAAL,CAAWC,QAAZ,CAAsB,MAAKD,KAAL,CAAWE,QAAjC,CAAL,CAAgDU,IAAhD,CAAqD,SAAAC,IAAI,CAAI,CAC3DC,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB,EACA,GAAIH,IAAI,CAACI,OAAT,CAAkB,CAChB,MAAKX,QAAL,CAAc,CACZH,KAAK,CAAEU,IAAI,CAACI,OADA,CAAd,EAGD,CAJD,IAIO,CACL,MAAKD,KAAL,CAAWE,OAAX,CAAmBL,IAAnB,EACAC,OAAO,CAACC,GAAR,CAAY,MAAKI,UAAjB,EACA,MAAKH,KAAL,CAAWI,mBAAX,GACA,MAAKJ,KAAL,CAAWK,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACAR,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWO,eAAvB,EACAT,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWQ,IAAX,CAAgBC,YAA5B,EACD,CACF,CAdD,EAeD,C,gGA9BoB,CACnB,KAAKN,UAAL,CAAkB,IAAlB,CAED,C,mEA6BsB,CACrB,KAAKA,UAAL,CAAkB,KAAlB,CACD,C,uCAEQ,CACP,MACE,gCACE,oBAAC,IAAD,EAAM,QAAQ,CAAE,KAAKT,YAArB,EACE,oBAAC,IAAD,CAAM,KAAN,MACE,oBAAC,IAAD,CAAM,KAAN,EAAY,OAAO,CAAC,UAApB,aADF,CAEE,oBAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,KAAK,CAAE,KAAKV,KAAL,CAAWC,QAJpB,CAKE,QAAQ,CAAE,KAAKG,YALjB,EAFF,CADF,CAWE,oBAAC,IAAD,CAAM,KAAN,MACE,oBAAC,IAAD,CAAM,KAAN,EAAY,OAAO,CAAC,UAApB,cADF,CAEE,oBAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,UAHL,CAIE,KAAK,CAAE,KAAKJ,KAAL,CAAWE,QAJpB,CAKE,QAAQ,CAAE,KAAKE,YALjB,EAFF,CAXF,CAqBG,KAAKJ,KAAL,CAAWG,KAAX,EACC,oBAAC,KAAD,EAAO,OAAO,CAAC,QAAf,EAAyB,KAAKH,KAAL,CAAWG,KAApC,CAtBJ,CAwBE,oBAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,WAxBF,CADF,CADF,CA+BD,C,mBA3EiBT,S,EA8EpB,cAAeK,CAAAA,KAAf","sourcesContent":["import React, { Component } from \"react\"\nimport { login } from \"../services/auth\"\nimport { Alert, Form, Button } from \"react-bootstrap\"\n\n\nclass Login extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    error: \"\"\n  };\n\n  componentWillMount() {\n    this._isMounted = true;\n\n  }\n\n  handleChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    })\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n\n\n    login(this.state.username, this.state.password).then(data => {\n      console.log(this.props)\n      if (data.message) {\n        this.setState({\n          error: data.message\n        });\n      } else {\n        this.props.setUser(data)\n        console.log(this._isMounted);\n        this.props.changeLanguageLogin()\n        this.props.history.push(\"/\")\n        console.log(this.props.currentLanguage)\n        console.log(this.props.user.siteLanguage)\n      }\n    });\n  };\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    return (\n      <div>\n        <Form onSubmit={this.handleSubmit}>\n          <Form.Group>\n            <Form.Label htmlFor=\"username\">Username</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"username\"\n              id=\"username\"\n              value={this.state.username}\n              onChange={this.handleChange}\n            />\n          </Form.Group>\n          <Form.Group>\n            <Form.Label htmlFor=\"password\">Password:</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              value={this.state.password}\n              onChange={this.handleChange}\n            />\n          </Form.Group>\n          {this.state.error && (\n            <Alert variant=\"danger\">{this.state.error}</Alert>\n          )}\n          <Button type=\"submit\">Log in</Button>\n\n        </Form>\n      </div>\n    )\n  }\n}\n\nexport default Login;\n\n\n"]},"metadata":{},"sourceType":"module"}