{"ast":null,"code":"import _defineProperty from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from\"react\";import\"./App.css\";import Navbar from\"./components/Navbar\";import{Route,Switch}from\"react-router-dom\";import Signup from\"./components/Signup\";import Login from\"./components/Login\";// import { Link, Switch } from \"react-router-dom\";\nimport Posts from\"./components/Post/Posts\";import About from\"./components/About\";import Profile from\"./components/Profile\";import Home from\"./components/Home\";import PostDetail from\"./components/Post/PostDetail\";import axios from\"axios\";import MailboxWrapper from\"./components/Post/MailboxWrapper\";import MailboxDetail from\"./components/Post/MailboxDetail\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={user:_this.props.user,profile:{error:\"\",username:\"\",urlPath:\"https://res.cloudinary.com/mariakristiina/image/upload/v1575542831/avatar-orange_q8rkfz.png\",age:\"\",gender:\"\",languages:[],about:\"\"},editProfileForm:false,postDetail:{title:\"\",date:\"\",startTime:\"\",endTime:\"\",postType:\"\",category:\"\",description:\"\",owner:\"\",match:\"\",messages:\"\"},currentLanguage:\"English\",hover:false};_this.setUser=function(user){_this.setState({user:user});};_this.getDataProfile=function(){var id=_this.state.user._id;axios.get(\"/profile/\".concat(id)).then(function(response){_this.setState({profile:{username:response.data.username,age:response.data.age,gender:response.data.gender,languages:response.data.languages,about:response.data.about,urlPath:response.data.urlPath,language:response.data.language,siteLanguage:response.data.siteLanguage}},function(){return console.log(\"state after data call\",_this.state);});}).catch(function(err){if(err.response.status===404){_this.setState({error:err.response.data.message});}});};_this.handleChangeProfile=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState({profile:_objectSpread({},_this.state.profile,_defineProperty({},name,value))});};_this.toggleEditProfile=function(){console.log(_this.state.editProfileForm);_this.setState({editProfileForm:!_this.state.editProfileForm});};_this.handleSubmitProfile=function(event){event.preventDefault();var id=_this.state.user._id;var _this$state$profile=_this.state.profile,username=_this$state$profile.username,age=_this$state$profile.age,gender=_this$state$profile.gender,languages=_this$state$profile.languages,about=_this$state$profile.about,urlPath=_this$state$profile.urlPath;axios.put(\"/profile/\".concat(id),{username:username,age:age,gender:gender,languages:languages,about:about,urlPath:urlPath}).then(function(response){_this.setState({profile:response.data,editProfileForm:false});}).catch(function(err){console.log(err);});};_this.imageUpload=function(event){console.log(event.target.files[0]);var file=event.target.files[0];var upload=new FormData();console.log(upload);var id=_this.state.user._id;upload.append(\"urlPath\",file);axios.post(\"/profile/\".concat(id),upload).then(function(response){console.log(response.data.secure_url);_this.setState({profile:_objectSpread({},_this.state.profile,{urlPath:response.data.secure_url})});console.log(_this.state.profile.urlPath);});};_this.handleChangeLanguages=function(event){if(!_this.state.user){_this.setState({currentLanguage:event.target.value},function(){return console.log(_this.state.currentLanguage);});}else{_this.setState({currentLanguage:event.target.value});//console.log(this.state.currentLanguage);\naxios.put(\"/profile/language\",{siteLanguage:event.target.value}).then(function(response){console.log(response.data);console.log(_this.state.currentLanguage);}).catch(function(err){return err;});}};_this.changeLanguageLogin=function(){_this.setState({currentLanguage:_this.state.user.siteLanguage});};return _this;}_createClass(App,[{key:\"render\",// HOVERING\n// mouseOver = () => {\n//   this.setState({\n//     hover: !this.state.hover\n//   })\n//   console.log(\"hover:\", this.state.hover)\n// }\nvalue:function render(){var _this2=this;return React.createElement(\"div\",{className:\"App\"},React.createElement(Navbar,{user:this.state.user,clearUser:this.setUser,handleChangeLanguages:this.handleChangeLanguages,currentLanguage:this.state.currentLanguage}),React.createElement(Route,{exact:true,path:\"/\",render:function render(props){return React.createElement(Home,Object.assign({user:_this2.state.user,currentLanguage:_this2.state.currentLanguage,mouseOver:_this2.mouseOver,hover:_this2.state.hover},props));}}),React.createElement(Route,{exact:true,path:\"/about\",render:function render(props){return React.createElement(About,Object.assign({user:_this2.state.user,currentLanguage:_this2.state.currentLanguage},props));}}),React.createElement(Route,{exact:true,path:\"/login\",render:function render(props){return React.createElement(Login,Object.assign({},props,{setUser:_this2.setUser,currentLanguage:_this2.state.currentLanguage,user:_this2.state.user,changeLanguageLogin:_this2.changeLanguageLogin}));}}),React.createElement(Route,{exact:true,path:\"/profile/:id\",render:function render(props){return React.createElement(Profile,Object.assign({user:_this2.state.user,profile:_this2.state.profile,handleChangeProfile:_this2.handleChangeProfile,toggleEditProfile:_this2.toggleEditProfile,handleSubmitProfile:_this2.handleSubmitProfile,getDataProfile:_this2.getDataProfile,imageUpload:_this2.imageUpload,editProfileForm:_this2.state.editProfileForm,currentLanguage:_this2.state.currentLanguage},props));}}),React.createElement(Route,{exact:true,path:\"/signup\",render:function render(props){return React.createElement(Signup,Object.assign({},props,{setUser:_this2.setUser,currentLanguage:_this2.state.currentLanguage,profile:_this2.state.profile}));}}),React.createElement(Route,{exact:true,path:\"/posts\",render:function render(props){return React.createElement(Posts,Object.assign({},props,{setUser:_this2.setUser,user:_this2.state.user}));}}),React.createElement(Route,{exact:true,path:\"/post/:id\",render:function render(props){return React.createElement(PostDetail,Object.assign({},props,{postDetail:_this2.state.posts,user:_this2.state.user}));}}),React.createElement(Route,{path:\"/mailbox/:user/:messageId?\",render:function render(props){return React.createElement(MailboxWrapper,Object.assign({user:_this2.state.user},props));}}));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/App.js"],"names":["React","Navbar","Route","Switch","Signup","Login","Posts","About","Profile","Home","PostDetail","axios","MailboxWrapper","MailboxDetail","App","state","user","props","profile","error","username","urlPath","age","gender","languages","about","editProfileForm","postDetail","title","date","startTime","endTime","postType","category","description","owner","match","messages","currentLanguage","hover","setUser","setState","getDataProfile","id","_id","get","then","response","data","language","siteLanguage","console","log","catch","err","status","message","handleChangeProfile","event","target","name","value","toggleEditProfile","handleSubmitProfile","preventDefault","put","imageUpload","files","file","upload","FormData","append","post","secure_url","handleChangeLanguages","changeLanguageLogin","mouseOver","posts","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport Navbar from \"./components/Navbar\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Signup from \"./components/Signup\";\nimport Login from \"./components/Login\";\n// import { Link, Switch } from \"react-router-dom\";\nimport Posts from \"./components/Post/Posts\";\nimport About from \"./components/About\"\n\nimport Profile from \"./components/Profile\";\nimport Home from \"./components/Home\";\nimport PostDetail from \"./components/Post/PostDetail\";\nimport axios from \"axios\";\nimport MailboxWrapper from \"./components/Post/MailboxWrapper\";\nimport MailboxDetail from \"./components/Post/MailboxDetail\";\n\n\n\nclass App extends React.Component {\n  state = {\n    user: this.props.user,\n    profile: {\n      error: \"\",\n      username: \"\",\n      urlPath:\n        \"https://res.cloudinary.com/mariakristiina/image/upload/v1575542831/avatar-orange_q8rkfz.png\",\n      age: \"\",\n      gender: \"\",\n      languages: [],\n      about: \"\"\n    },\n    editProfileForm: false,\n    postDetail: {\n      title: \"\",\n      date: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      postType: \"\",\n      category: \"\",\n      description: \"\",\n      owner: \"\",\n      match: \"\",\n      messages: \"\"\n    },\n    currentLanguage: \"English\",\n    hover: false\n  };\n\n  // =================== user functions\n  setUser = user => {\n    this.setState({\n      user: user\n    });\n  };\n\n\n\n  //-----------------------Profile func------------\n\n  getDataProfile = () => {\n    const id = this.state.user._id;\n\n    axios\n      .get(`/profile/${id}`)\n      .then(response => {\n        this.setState(\n          {\n            profile: {\n              username: response.data.username,\n              age: response.data.age,\n              gender: response.data.gender,\n              languages: response.data.languages,\n              about: response.data.about,\n              urlPath: response.data.urlPath,\n              language: response.data.language,\n              siteLanguage: response.data.siteLanguage\n            }\n          },\n          () => console.log(\"state after data call\", this.state)\n        );\n      })\n      .catch(err => {\n        if (err.response.status === 404) {\n          this.setState({\n            error: err.response.data.message\n          });\n        }\n      });\n  };\n\n  handleChangeProfile = event => {\n    const { name, value } = event.target;\n    this.setState({\n      profile: { ...this.state.profile, [name]: value }\n    });\n  };\n\n  toggleEditProfile = () => {\n    console.log(this.state.editProfileForm);\n    this.setState({\n      editProfileForm: !this.state.editProfileForm\n    });\n  };\n\n  handleSubmitProfile = event => {\n    event.preventDefault();\n\n    const id = this.state.user._id;\n    const {\n      username,\n      age,\n      gender,\n      languages,\n      about,\n      urlPath\n    } = this.state.profile;\n    axios\n      .put(`/profile/${id}`, {\n        username,\n        age,\n        gender,\n        languages,\n        about,\n        urlPath\n      })\n      .then(response => {\n        this.setState({\n          profile: response.data,\n          editProfileForm: false\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  imageUpload = event => {\n    console.log(event.target.files[0]);\n    const file = event.target.files[0];\n    let upload = new FormData();\n    console.log(upload);\n    const id = this.state.user._id;\n\n    upload.append(\"urlPath\", file);\n    axios.post(`/profile/${id}`, upload).then(response => {\n      console.log(response.data.secure_url);\n      this.setState({\n        profile: {\n          ...this.state.profile,\n          urlPath: response.data.secure_url\n        }\n      });\n      console.log(this.state.profile.urlPath);\n    });\n  };\n\n\n  // POST detail functions\n\n  // languages functions\n\n  handleChangeLanguages = event => {\n    if(!this.state.user) {\n    this.setState(\n      {\n        currentLanguage: event.target.value\n      },\n      () => console.log(this.state.currentLanguage)\n    );}\n    else {\n      this.setState(\n        {\n          currentLanguage: event.target.value\n        })\n      //console.log(this.state.currentLanguage);\n      axios\n        .put(\"/profile/language\", {\n          siteLanguage: event.target.value\n        })\n        .then(response => {\n          console.log(response.data);\n          console.log(this.state.currentLanguage);\n          })\n        .catch(err => {\n          return err;\n        });\n    }\n  };\n\n  changeLanguageLogin = () => {\n    this.setState({\n      currentLanguage: this.state.user.siteLanguage\n    })\n  }\n\n  // HOVERING\n\n  // mouseOver = () => {\n  //   this.setState({\n  //     hover: !this.state.hover\n  //   })\n  //   console.log(\"hover:\", this.state.hover)\n  // }\n\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Navbar\n          user={this.state.user}\n          clearUser={this.setUser}\n          handleChangeLanguages={this.handleChangeLanguages}\n          currentLanguage={this.state.currentLanguage}\n        />\n\n        <Route\n          exact\n          path=\"/\"\n          render={props => (\n            <Home\n              user={this.state.user}\n              currentLanguage={this.state.currentLanguage}\n              mouseOver={this.mouseOver}\n              hover={this.state.hover}\n              {...props}\n            />\n          )}\n        />\n\n        <Route\n          exact\n          path=\"/about\"\n          render={props => (\n            <About\n              user={this.state.user}\n              currentLanguage={this.state.currentLanguage}\n              {...props}\n            />\n          )}\n        />\n\n        <Route\n          exact\n          path=\"/login\"\n          render={props => <Login \n          {...props} \n          setUser={this.setUser} \n          currentLanguage={this.state.currentLanguage} \n          user={this.state.user}\n          changeLanguageLogin={this.changeLanguageLogin}\n          />}\n        />\n        <Route\n          exact\n          path=\"/profile/:id\"\n          render={props => (\n            <Profile\n              user={this.state.user}\n              profile={this.state.profile}\n              handleChangeProfile={this.handleChangeProfile}\n              toggleEditProfile={this.toggleEditProfile}\n              handleSubmitProfile={this.handleSubmitProfile}\n              getDataProfile={this.getDataProfile}\n              imageUpload={this.imageUpload}\n              editProfileForm={this.state.editProfileForm}\n              currentLanguage={this.state.currentLanguage}\n              {...props}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/signup\"\n          render={props => (\n            <Signup\n              {...props}\n              setUser={this.setUser}\n              currentLanguage={this.state.currentLanguage}\n              profile={this.state.profile}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/posts\"\n          render={props => (\n            <Posts {...props} setUser={this.setUser} user={this.state.user} />\n          )}\n        />\n        <Route\n          exact\n          path=\"/post/:id\"\n          render={props => (\n            <PostDetail\n              {...props}\n              postDetail={this.state.posts}\n              user={this.state.user}\n            />\n          )}\n        />\n        <Route\n          path=\"/mailbox/:user/:messageId?\"\n          render={props => <MailboxWrapper user={this.state.user} {...props} />}\n        />\n\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}