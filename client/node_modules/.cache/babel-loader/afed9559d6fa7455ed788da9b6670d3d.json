{"ast":null,"code":"var _jsxFileName = \"/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Post/Posts.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport PostList from \"./PostList\";\n\nclass Posts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [],\n      newPost: {\n        title: \"\",\n        date: \"\",\n        startTime: \"\",\n        endTime: \"\",\n        postType: \"\",\n        category: \"\",\n        description: \"\"\n      },\n      search: \"\",\n      category: \"\",\n      owner: false,\n      match: false\n    };\n\n    this.getDataPosts = () => {\n      axios.get('/post').then(response => {\n        console.log(response.data);\n        this.setState({\n          posts: [...response.data]\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleChangeNewPost = event => {\n      console.log(event.target.value);\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        newPost: {\n          [name]: value\n        }\n      });\n    };\n\n    this.handleSubmitNewPost = event => {\n      event.preventDefault();\n      axios.post(\"/post/new\", {\n        title: this.state.newPost.title,\n        startTime: this.state.newPost.startTime,\n        endTime: this.state.newPost.endTime,\n        postType: this.state.newPost.postType,\n        category: this.state.newPost.category,\n        description: this.state.newPost.description\n      }).then(response => {\n        response.refreshData();\n        this.setState({\n          title: \"\",\n          startTime: \"\",\n          endTime: \"\",\n          postType: \"\",\n          category: \"\",\n          description: \"\"\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleChangeFilter = event => {\n      this.setState({\n        [event.target.name]: event.target.type === \"checkbox\" ? event.target.checked : event.target.value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getDataPosts();\n  } //=============================== postForm functions\n\n\n  render() {\n    const search = this.state.search.toLowerCase();\n    const filteredPosts = this.state.posts.filter(post => {\n      console.log(\"category from state: \", this.state.category);\n      return (this.state.owner && post.owner._id === this.props.user._id || this.state.match && post.match._id === this.props.user._id) && (post.title.toLowerCase().includes(search) || post.category.toLowerCase().includes(search)) || this.state.category === post.category || !this.state.category;\n    });\n    return React.createElement(\"div\", {\n      className: \"post-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"search\",\n      value: this.state.search,\n      onChange: this.handleChangeFilter,\n      placeholder: \"search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"owner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"My Posts\"), React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"owner\",\n      id: \"owner\",\n      onChange: this.handleChangeFilter,\n      checked: this.state.owner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"match\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Matched posts\"), React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"match\",\n      id: \"match\",\n      onChange: this.handleChangeFilter,\n      checked: this.state.match,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Filter by Category\"), React.createElement(\"select\", {\n      name: \"category\",\n      id: \"category\",\n      value: this.state.category,\n      onChange: this.handleChangeFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"--\"), React.createElement(\"option\", {\n      value: \"language lessons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Language lessons\"), React.createElement(\"option\", {\n      value: \"tutoring\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Tutoring\"), React.createElement(\"option\", {\n      value: \"government appointment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Government appointment\"), React.createElement(\"option\", {\n      value: \"doctor appointment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Doctor appointment\"), React.createElement(\"option\", {\n      value: \"meet people\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Meet people\"), React.createElement(\"option\", {\n      value: \"activities for kids\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Activities for kids\"), React.createElement(\"option\", {\n      value: \"activities for seniors\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Activities for seniors\")), React.createElement(PostList, {\n      posts: filteredPosts,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/post/new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Create a new post\"));\n  }\n\n}\n\nexport default Posts;","map":{"version":3,"sources":["/Users/mariakristiina/Desktop/ironhack.bootcamp/final-project/finalproject/client/src/components/Post/Posts.js"],"names":["React","Component","Link","axios","PostList","Posts","state","posts","newPost","title","date","startTime","endTime","postType","category","description","search","owner","match","getDataPosts","get","then","response","console","log","data","setState","catch","err","handleChangeNewPost","event","target","value","name","handleSubmitNewPost","preventDefault","post","refreshData","handleChangeFilter","type","checked","componentDidMount","render","toLowerCase","filteredPosts","filter","_id","props","user","includes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport PostList from \"./PostList\";\n\nclass Posts extends Component {\n  state = {\n    posts: [],\n    newPost: {\n      title: \"\",\n      date: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      postType: \"\",\n      category: \"\",\n      description: \"\"\n    },\n    search: \"\",\n    category: \"\",\n    owner: false,\n    match: false\n  };\n\n  //============================ posts functions\n  getDataPosts = () => {\n    axios\n      .get('/post')\n      .then(response => {\n        console.log(response.data)\n        this.setState({\n          posts: [...response.data]\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  };\n\n  componentDidMount() {\n    this.getDataPosts();\n  }\n\n  //=============================== postForm functions\n\n  handleChangeNewPost = event => {\n    console.log(event.target.value);\n    const { name, value } = event.target\n\n    this.setState({\n      newPost: { [name]: value }\n    });\n  };\n\n  handleSubmitNewPost = event => {\n    event.preventDefault();\n    \n    axios\n      .post(\"/post/new\", {\n        title: this.state.newPost.title,\n        startTime: this.state.newPost.startTime,\n        endTime: this.state.newPost.endTime,\n        postType: this.state.newPost.postType,\n        category: this.state.newPost.category,\n        description: this.state.newPost.description\n      })\n      .then(response => {\n        response.refreshData();\n        this.setState({\n          title: \"\",\n          startTime: \"\",\n          endTime: \"\",\n          postType: \"\",\n          category: \"\",\n          description: \"\"\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  //=============================== filterForm functions\n\n\n  handleChangeFilter = event => {\n    this.setState({\n      [event.target.name]:\n        event.target.type === \"checkbox\"\n          ? event.target.checked\n          : event.target.value\n    });\n  };\n\n\n  render() {\n    const search = this.state.search.toLowerCase();\n\n    const filteredPosts = this.state.posts.filter(post => {\n      \n      console.log(\"category from state: \", this.state.category)\n      return (\n        ((this.state.owner && post.owner._id === this.props.user._id) ||\n          (this.state.match && post.match._id === this.props.user._id)) &&\n        (post.title.toLowerCase().includes(search) ||\n          post.category.toLowerCase().includes(search)) ||\n        (this.state.category === post.category || !this.state.category)\n      );\n    });\n\n    return (\n      <div className=\"post-container\">\n\n        <input\n          type=\"text\"\n          name=\"search\"\n          value={this.state.search}\n          onChange={this.handleChangeFilter}\n          placeholder=\"search\"\n        />\n        <br />\n        <label htmlFor=\"owner\">My Posts</label>\n        <input\n          type=\"checkbox\"\n          name=\"owner\"\n          id=\"owner\"\n          onChange={this.handleChangeFilter}\n          checked={this.state.owner}\n        />\n        <label htmlFor=\"match\">Matched posts</label>\n        <input\n          type=\"checkbox\"\n          name=\"match\"\n          id=\"match\"\n          onChange={this.handleChangeFilter}\n          checked={this.state.match}\n        />\n        <label htmlFor=\"category\">Filter by Category</label>\n        <select\n          name=\"category\"\n          id=\"category\"\n          value={this.state.category}\n          onChange={this.handleChangeFilter}\n        >\n          <option value=\"\">--</option>\n          <option value=\"language lessons\">Language lessons</option>\n          <option value=\"tutoring\">Tutoring</option>\n          <option value=\"government appointment\">Government appointment</option>\n          <option value=\"doctor appointment\">Doctor appointment</option>\n          <option value=\"meet people\">Meet people</option>\n          <option value=\"activities for kids\">Activities for kids</option>\n          <option value=\"activities for seniors\">Activities for seniors</option>\n        </select>\n\n\n        <PostList posts={filteredPosts} />\n\n        <Link to={`/post/new`}>Create a new post\n              </Link>\n      </div>\n    )\n  }\n\n\n}\n\n\n\nexport default Posts;\n\n"]},"metadata":{},"sourceType":"module"}